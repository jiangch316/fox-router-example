!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){var n=r(1);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(2)(!1)).push([e.i,"/*窗口class*/\n.fox-views {\n    /* position: relative; */\n}\n/*views window*/\n.fox-views-window{\n\n}\n/*隐藏view*/\n.fox-view-hide {\n    display: none;\n}\n/*窗口class*/\n.fox-views-window > .fox-view{\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    z-index: 100;\n}\n\n.fox-view-trans-enter {}\n\n.fox-view-trans-enter-active {\n    animation: fox-view-in-slide-right 330ms;\n    -webkit-animation: fox-view-in-slide-right 330ms;\n    z-index: 120;\n}\n\n.fox-view-trans-enter-to {}\n\n.fox-view-trans-leave {}\n\n.fox-view-trans-leave-active {\n    animation: fox-view-out-slide-right 320ms;\n    -webkit-animation: fox-view-out-slide-right 320ms;\n    z-index: 120;\n}\n\n.fox-view-trans-leave-to {\n    -webkit-transform: translateX(103%);\n    transform: translateX(103%)\n}\n\n.fox-view-trans-show {}\n\n.fox-view-trans-show-active {\n    animation: fox-view-show-slide-right 300ms;\n    -webkit-animation: fox-view-show-slide-right 300ms;\n    z-index: 110;\n}\n\n.fox-view-trans-show-to {\n}\n\n.fox-view-trans-hide {\n\n}\n\n.fox-view-trans-hide-active {\n    animation: fox-view-hide-slide-left 320ms;\n    -webkit-animation: fox-view-hide-slide-left 320ms;\n    z-index: 110;\n}\n\n.fox-view-trans-hide-to {\n}\n\n/* 进场动画 */\n@-webkit-keyframes fox-view-in-slide-right {\n    0% {\n        -webkit-transform: translateX(103%);\n        transform: translateX(103%)\n    }\n    100% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n}\n@keyframes fox-view-in-slide-right {\n    0% {\n        -webkit-transform: translateX(103%);\n        transform: translateX(103%)\n    }\n    100% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n}\n\n/* 出场动画 */\n@-webkit-keyframes fox-view-out-slide-right {\n    0% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n    100% {\n        -webkit-transform: translateX(103%);\n        transform: translateX(103%)\n    }\n}\n@keyframes fox-view-out-slide-right {\n    0% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n    100% {\n        -webkit-transform: translateX(103%);\n        transform: translateX(103%)\n    }\n}\n\n/* 隐藏动画 */\n@-webkit-keyframes fox-view-hide-slide-left {\n    0% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n    100% {\n        -webkit-transform: translateX(-30%);\n        transform: translateX(-30%)\n    }\n}\n@keyframes fox-view-hide-slide-left {\n    0% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n    100% {\n        -webkit-transform: translateX(-30%);\n        transform: translateX(-30%)\n    }\n}\n\n/* 显示动画 */\n@-webkit-keyframes fox-view-show-slide-right {\n    0% {\n        -webkit-transform: translateX(-30%);\n        transform: translateX(-30%)\n    }\n    100% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n}\n@keyframes fox-view-show-slide-right {\n    0% {\n        -webkit-transform: translateX(-30%);\n        transform: translateX(-30%)\n    }\n    100% {\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%)\n    }\n}\n\n/*卡片容器class*/\n.fox-card-views{\n    position: relative;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n/*卡片页class*/\n.fox-card-views .fox-card-view{\n    width: 100%;\n    height: 100%;\n    display: none;\n}\n\n/*卡片页激活class*/\n.fox-card-views .fox-card-view-active{\n    display: block !important;\n}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),s=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(s).concat([i]).join("\n")}var o;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(n[s]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t,r){var n,i,s={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),l=function(e,t){return t?t.querySelector(e):document.querySelector(e)},a=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=l.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),h=null,f=0,u=[],c=r(4);function p(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=s[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(w(n.parts[o],t))}else{var l=[];for(o=0;o<n.parts.length;o++)l.push(w(n.parts[o],t));s[n.id]={id:n.id,refs:1,parts:l}}}}function d(e,t){for(var r=[],n={},i=0;i<e.length;i++){var s=e[i],o=t.base?s[0]+t.base:s[0],l={css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(l):r.push(n[o]={id:o,parts:[l]})}return r}function m(e,t){var r=a(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,r);r.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return r.nc}();n&&(e.attrs.nonce=n)}return g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function w(e,t){var r,n,i,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var o=f++;r=h||(h=v(t)),n=R.bind(null,r,o,!1),i=R.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),n=T.bind(null,r,t),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=S.bind(null,r),i=function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=d(e,t);return p(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var o=r[i];(l=s[o.id]).refs--,n.push(l)}e&&p(d(e,t),t);for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var a=0;a<l.parts.length;a++)l.parts[a]();delete s[l.id]}}}};var b,x=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function R(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var s=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function S(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function T(e,t,r){var n=r.css,i=r.sourceMap,s=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||s)&&(n=c(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(o),l&&URL.revokeObjectURL(l)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,s=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?r+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,r){"use strict";r.r(t),r.d(t,"fox",(function(){return ir}));r(0);function n(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var i=1,s="";if("?"===e[l=r+1])throw new TypeError('Pattern cannot start with "?" at '+l);for(;l<e.length;)if("\\"!==e[l]){if(")"===e[l]){if(0===--i){l++;break}}else if("("===e[l]&&(i++,"?"!==e[l+1]))throw new TypeError("Capturing groups are not allowed at "+l);s+=e[l++]}else s+=e[l++]+e[l++];if(i)throw new TypeError("Unbalanced pattern at "+r);if(!s)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:s}),r=l}else{for(var o="",l=r+1;l<e.length;){var a=e.charCodeAt(l);if(!(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a))break;o+=e[l++]}if(!o)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:o}),r=l}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,s="[^"+o(t.delimiter||"/#?")+"]+?",l=[],a=0,h=0,f="",u=function(e){if(h<r.length&&r[h].type===e)return r[h++].value},c=function(e){var t=u(e);if(void 0!==t)return t;var n=r[h],i=n.type,s=n.index;throw new TypeError("Unexpected "+i+" at "+s+", expected "+e)},p=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};h<r.length;){var d=u("CHAR"),m=u("NAME"),y=u("PATTERN");if(m||y){var v=d||"";-1===i.indexOf(v)&&(f+=v,v=""),f&&(l.push(f),f=""),l.push({name:m||a++,prefix:v,suffix:"",pattern:y||s,modifier:u("MODIFIER")||""})}else{var g=d||u("ESCAPED_CHAR");if(g)f+=g;else if(f&&(l.push(f),f=""),u("OPEN")){v=p();var w=u("NAME")||"",b=u("PATTERN")||"",x=p();c("CLOSE"),l.push({name:w||(b?a++:""),pattern:w&&!b?s:b,prefix:v,suffix:x,modifier:u("MODIFIER")||""})}else c("END")}}return l}function i(e,t){return function(e,t){void 0===t&&(t={});var r=l(t),n=t.encode,i=void 0===n?function(e){return e}:n,s=t.validate,o=void 0===s||s,a=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var s=e[n];if("string"!=typeof s){var l=t?t[s.name]:void 0,h="?"===s.modifier||"*"===s.modifier,f="*"===s.modifier||"+"===s.modifier;if(Array.isArray(l)){if(!f)throw new TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===l.length){if(h)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var u=0;u<l.length;u++){var c=i(l[u],s);if(o&&!a[n].test(c))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+c+'"');r+=s.prefix+c+s.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!h){var p=f?"an array":"a string";throw new TypeError('Expected "'+s.name+'" to be '+p)}}else{c=i(String(l),s);if(o&&!a[n].test(c))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+c+'"');r+=s.prefix+c+s.suffix}}else r+=s}return r}}(n(e,t),t)}function s(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var s=n[0],o=n.index,l=Object.create(null),a=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?l[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return i(e,r)})):l[r.name]=i(n[e],r)},h=1;h<n.length;h++)a(h);return{path:s,index:o,params:l}}}(h(e,r,t),r,t)}function o(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function l(e){return e&&e.sensitive?"":"i"}function a(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,s=r.start,a=void 0===s||s,h=r.end,f=void 0===h||h,u=r.encode,c=void 0===u?function(e){return e}:u,p="["+o(r.endsWith||"")+"]|$",d="["+o(r.delimiter||"/#?")+"]",m=a?"^":"",y=0,v=e;y<v.length;y++){var g=v[y];if("string"==typeof g)m+=o(c(g));else{var w=o(c(g.prefix)),b=o(c(g.suffix));if(g.pattern)if(t&&t.push(g),w||b)if("+"===g.modifier||"*"===g.modifier){var x="*"===g.modifier?"?":"";m+="(?:"+w+"((?:"+g.pattern+")(?:"+b+w+"(?:"+g.pattern+"))*)"+b+")"+x}else m+="(?:"+w+"("+g.pattern+")"+b+")"+g.modifier;else m+="("+g.pattern+")"+g.modifier;else m+="(?:"+w+b+")"+g.modifier}}if(f)i||(m+=d+"?"),m+=r.endsWith?"(?="+p+")":"$";else{var R=e[e.length-1],S="string"==typeof R?d.indexOf(R[R.length-1])>-1:void 0===R;i||(m+="(?:"+d+"(?="+p+"))?"),S||(m+="(?="+d+"|"+p+")")}return new RegExp(m,l(r))}(n(e,r),t,r)}function h(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return h(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",l(r))}(e,t,r):a(e,t,r)}const f=e=>null!=e,u=Symbol("sync"),c=Symbol("resolveRoute"),p=Symbol("$routerViewSet"),d=Symbol("$routerView"),m=Symbol("$routerViewDepth"),y=Symbol("$routerViewName"),v=Symbol("$rootViewName");let g=(new Date).getTime();class w{static get(){let e=++g;return e==Number.MAX_VALUE&&(g=0),e}}const b={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Object]":"object"};function x(e){let t=Object.prototype.toString.call(e);return null==e?String(e):b[t]||"object"}function R(e){return"function"===x(e)}function S(e){return"array"===x(e)}function T(e){let t=!!e&&"length"in e&&e.length,r=x(e);return"function"!==r&&!O(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function $(e,t){let r=t||[];return null!=e&&(T(Object(e))?A(r,"string"==typeof e?[e]:e):r.push(e)),r}function A(e,t){let r=+t.length,n=0,i=e.length;for(;n<r;n++)e[i++]=t[n];return e.length=i,e}function O(e){return e&&"object"==typeof e&&"setInterval"in e}function k(e){if(!e||"object"!==x(e)||e.nodeType||O(e))return!1;let t,r=Object.prototype.hasOwnProperty;if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return void 0===t||r.call(e,t)}function j(...e){let t=f(e[0])?e[0]:{},r=1,n=e.length,i=!1;for("boolean"==typeof t&&(i=t,t=e[r]||{},r++),"object"==typeof t||R(t)||(t={}),r===n&&(t=this,r--);r<n;r++)if(null!=e[r]&&null!=e[r]){let n=e[r];for(let e in n){let r=t[e],s=n[e];if(t===s)continue;let o=!1;if(i&&s&&(k(s)||(o=S(s)))){let n;n=o?r&&S(r)?r:[]:r&&k(r)?r:{},t[e]=j(i,n,s)}else void 0!==s&&(t[e]=s)}}return t}function C(e,t,r=!1){if(r)for(let n in t){let i=e[n],s=t[n];if(i===s)continue;let o=x(s);"function"!==o&&"regExp"!==o&&"date"!==o&&("object"===o?(i=k(i)?i:{},C(i,s,r),e[n]=i):e[n]=s)}else j(!0,e,t);return e}function E(e,t){if(e==t)return!0;if(void 0===e||void 0===t)return!1;let r=x(e);if(r!==x(t))return!1;if("object"===r){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++){let i=r[n];if(!E(e[i],t[i]))return!1}return!0}if("array"===r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){if(!E(e[r],t[r]))return!1}return!0}return!1}function P(e,t,r){if(T(e)){let r=e.length;for(let n=0;n<r&&!1!==t.call(e[n],n,e[n]);n++);}else for(let n in e)if(r){if(e.hasOwnProperty(n)&&!1===t.call(e[n],n,e[n]))break}else if(!1===t.call(e[n],n,e[n]))break;return e}var _=window.console;const L="undefined"!=typeof window,M=window,N=window.document;function q(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent(`on${t}`,r):e[`on${t}`]=r}function X(e,t,r){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent?e.detachEvent(`on${t}`,r):e[`on${t}`]=null}let I=function(){let e=M.location,t=e.protocol+"//"+e.host;return t+=function(e){let t=e,r=t.lastIndexOf("/");return r>0&&r<t.length-1?t=t.substring(0,r+1):0===r&&-1!==t.indexOf(".")?t="/":-1===r&&(t=-1==t.indexOf(".")?"/"+t+"/":"/"),0!==t.indexOf("/")&&(t="/"+t),t}(e.pathname),t}();const F=Symbol("_notifyChange"),D=Symbol("_generateLocation"),U=Symbol("_setHashRecorder");class H{constructor(e,t="",r=!0,n="/"){this.router=e,this.query=t,this.hashMonitor=r,this.defaultPath=n,q(M,"popstate",()=>{let e=M.history.state;this[F](e)})}init(){if(!this.hashMonitor)return;let e=this.getHash()||this.defaultPath,t=M.localStorage.getItem(e);if(t){let e=JSON.parse(t);this[F](e)}else{let t,r=e.indexOf("!");t=-1!=r?e.substring(r+1):e;let n=this.router[c](t);this[F]([n])}}[U](e,t){if(!this.hashMonitor)return;let r=JSON.stringify(t);M.localStorage.setItem(e,r)}listen(e){this.changeHandle=e}[F](e){this.changeHandle(e)}go(e){M.history.go(e)}push(e){let t=this[D](e.currentRoute);M.history.pushState(e.routes,"",t),this[U](e.currentRoute.fullPath,e.routes)}replace(e){let t=this[D](e.currentRoute);M.history.replaceState(e.routes,"",t),this[U](e.currentRoute.fullPath,e.routes)}[D](e){let t;if(e.query){let r="";if("object"===x(e.query))for(let t in e.query){let n=`${t}=${encodeURIComponent(e.query[t])}`;r.length>0&&(r+="&"),r+=n}else r=e.query;this.query?(t=`${this.query}&${r}`,"?"!==t.charAt(0)&&(t=`?${t}`)):t=`?${r}`}const r=M.location;let n;return n=t?`${r.origin}${r.pathname}${t}#${e.fullPath}`:`${r.origin}${r.pathname}#${e.fullPath}`,n}getHash(){let e=M.location.hash,t=e.indexOf("#");if(-1!=t){return e.substring(t+1)}}}class B{constructor(e,t){this.currentRoute=e,this.routes=t}}class V{constructor(e){if(S(e))for(let t of e)S(t)?Reflect.defineProperty(this,t[0],{value:t[1],configurable:!1,writable:!1,enumerable:!0}):Reflect.defineProperty(this,t,{value:t,configurable:!1,writable:!1,enumerable:!0});else if("object"===x(e))for(let t in e){let r=e[t];Reflect.defineProperty(this,t,{value:r,configurable:!1,writable:!1,enumerable:!0})}else _.error("data in wrong format")}}function K(e){let t=!1;return function(...r){if(!t)return t=!0,e.apply(this,r)}}const z="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function J(e){return e.__esModule||z&&"Module"===e[Symbol.toStringTag]}const W=Symbol("$root"),G=Symbol("$rootNode"),Y=Symbol("$parentNode"),Q=Symbol("$baseName"),Z=Symbol("$caches"),ee=Symbol("getCacheKey"),te=new V(["Push","Replace","Put","Append","Open"]),re=new V(["Part","All"]);class ne{constructor(e,t,r){this.name=e,this.level=t,this.rootName=r}}class ie{get fullPath(){let e=this.path||`/${this.name}`;return`${this.root||"default"}!${e}`}}ie.isSame=function(e,t){return e===t||!(!f(e)||!f(t))&&((!e.path||e.path==t.path)&&((!e.name||e.name==t.name)&&(e.root==t.root&&(e.opsType==t.opsType&&e.index==t.index))))},ie.from=function(e){let t=new ie;if(void 0===e)return t;for(let r in e){let n=e[r];t[r]=n}const r=Object.getOwnPropertySymbols(e);if(void 0!==r&&r.length>0)for(let n of r)t[n]=e[n];return t};class se{}class oe{}class le{constructor(e,t,r,n){this[Z]={},this.id=w.get(),this.name=e,this.src=t,"function"!=typeof t&&(this.component=t),this.props=r,this.meta=n}[ee](e,t,r){return`${e||""}/${t}/${r}`}get isResolved(){return f(this.component)}resolve(){return function(e){let t=e.src;return new Promise((r,n)=>{const i=K(t=>{J(t)&&(t=t.default),e.component=t,console.info("success load async module"),r()}),s=K(e=>{console.info("reject load async module")});let o;try{o=t(i,s)}catch(e){s(e)}if(o)if("function"==typeof o.then)o.then(i,s);else{const e=o.component;e&&"function"==typeof e.then&&e.then(i,s)}})}(this)}remove(e,t,r){let n=this[ee](e,t,r);delete this[Z][n]}getComponent(e,t,r){let n=this[ee](e,t,r),i=this[Z][n];return i||(i=new oe,i.component={},j(!0,i.component,this.component),this[Z][n]=i),i.component}setInstance(e,t,r,n){let i=this[ee](e,t,r),s=this[Z][i];s||(s=new oe,this[Z][i]=s),s.instance=n}getInstance(e,t,r){let n=this[ee](e,t,r),i=this[Z][n];if(i)return i.instance}}class ae{}class he{get name(){return 0===this.index?this[Q]:`${this[Q]}-${this.index}`}constructor(e,t,r,n,i=0,s,o){this.active=!1,this[Q]=e,this.model=t,this[W]=r,this[G]=n,this.index=i,this.opsType=s,this.viewTagAttrs=o}}class fe{}class ue{static from(e,t,r){let n=new ue;return n.name=e.name,n.rootName=t,n.level=r,n.index=e.index,n.instance=e.model.getInstance(t,e.name,r),n.component=e.model.getComponent(t,e.name,r),n}}class ce{}ce.Busy="busy",ce.Free="free",ce.Reject="reject",ce.Exception="exception";class pe{}const de=Symbol("$chain"),me=Symbol("$cursor"),ye=Symbol("$persistentMode"),ve=Symbol("$status"),ge=Symbol("$args"),we=Symbol("$exArgs"),be=Symbol("$successFns"),xe=Symbol("$errorFns"),Re=Symbol("$session"),Se=Symbol("_go");class Te{constructor(e,t=!1){this[de]=[],this[me]=0,this[ye]=!1,this[ge]=[],this[we]=[],this[be]=[],this[xe]=[],this[ve]=ce.Free,this[Re]=e,this[ye]=t}[Se](e,...t){let r=this[ve];if(this[ve]=ce.Busy,this[me]+=e,this[me]<0&&(this[me]=0),this[ge]=t,r===ce.Exception||r===ce.Reject){let e=new pe;e.session=this[Re];let t=[e,...this[we]];for(;this[xe].length>0;){let e=this[xe].shift();Reflect.apply(e,this,t)}return this[ve]=r,this[de]=[],this[me]=0,this}if(this[me]>=this[de].length&&this[be].length>0){let e=new pe;e.session=this[Re];let t=[e,...this[ge]];for(;this[be].length>0;){let e=this[be].shift();Reflect.apply(e,this,t)}return this[ve]=ce.Free,this}if(this[me]>=this[de].length)return this[ve]=ce.Free,this;let n=this[de][this[me]];this[ye]||(this[de].splice(0,this[me]+1),this[me]=-1);let i=this[me]+1;try{let e=!1,t=new pe;t.go=(t,...r)=>{e||(e=!0,Reflect.apply(this[Se],this,[t,...r]))},t.resolve=(...t)=>{e||(e=!0,Reflect.apply(this[Se],this,[1,...t]))},t.reject=(...t)=>{e||(e=!0,Reflect.apply(this.reject,this,[...t]))},t.insert=t=>{e||(this[de].splice(i,0,t),i++)},t.session=this[Re],Reflect.apply(n,this,[t,...this[ge]])}catch(e){this.throw(e)}return this}reject(...e){this[ve]=ce.Reject,this[we]=e,Reflect.apply(this[Se],this,[0])}throw(...e){this[ve]=ce.Exception,this[we]=e,Reflect.apply(this[Se],this,[0])}reset(...e){this[ve]=ce.Busy,this[ge]=e,this[de]=[],this[me]=0;let t=new pe;t.session=this[Re];let r=[t,...this[ge]];for(;this[be].length>0;){let e=this[be].shift();Reflect.apply(e,this,r)}this[ve]=ce.Free}post(e){return this[ve]===ce.Reject||this[ve]===ce.Exception?this:("array"===x(e)?this[de]=[...this[de],...e]:this[de].push(e),this[ve]===ce.Busy||Reflect.apply(this[Se],this,[0,...this[ge]]),this)}wait(e,t){return e&&"function"==typeof e&&this[be].push(e),t&&"function"==typeof t&&this[xe].push(t),this[ve]===ce.Busy||Reflect.apply(this[Se],this,[0,...this[ge]]),this}exception(e){return e&&"function"==typeof e&&this[xe].push(e),this[ve]===ce.Busy||Reflect.apply(this[Se],this,[0,...this[ge]]),this}isFinish(){return this[ve]==ce.Reject||this[ve]==ce.Free&&this[me]>=this[de].length}}const $e={type:"GET",async:!0,contentType:"application/x-www-form-urlencoded",dataType:"string",cache:!1,timeout:3e4,processData:!0};function Ae(e){let t=function(){let e;try{e=new XMLHttpRequest}catch(t){let r=["Msxml3.XMLHTTP","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(let t=0,n=r.length;t<n;t++)try{e=new ActiveXObject(r[t])}catch(e){continue}}return e}();if(null==t||!t)return void logger.error("not support XmlHttpRequest");let r={};if(j(!0,r,$e),j(!0,r,e),(e=r).async)try{t.timeout=e.timeout,t.ontimeout=function(){e.error&&e.error(t,"timeout"),e.complete&&e.complete(t,"timeout")}}catch(e){logger.error(e.Message,e)}t.onreadystatechange=function(){if(t.readyState<4)e.loading&&e.loading(t.readyState);else{if(e.success&&(0==t.status||t.status>=200&&t.status<300)){let n=t.response;null==n&&(n=t.responseText);try{r=n,"json"==e.dataType&&"string"==x(r)&&(r=JSON.parse(r)),n=r}catch(r){return void(e.error&&e.error(t,r.message))}e.success(n,t.status,t)}else e.error&&e.error(t,t.status);var r;e.complete&&e.complete(t,t.status)}};try{let r=e.url;if(e.type&&"GET"===e.type.toUpperCase()&&(r=function(e,t,r){if(null==t)return e;let n;if(void 0===r&&(r="text"),0===(r=r.trim().toLowerCase()).indexOf("application/x-www-form-urlencoded")||0===r.indexOf("application/json"))if("object"==x(t))for(let e in t){let r=t[e];if("array"==x(r))for(let t=0;t<r.length;t++){let i=e+"="+encodeURIComponent(r[t]);n.length>0&&(n+="&"),n+=i}else{let t=e+"="+encodeURIComponent(r);n.length>0&&(n+="&"),n+=t}}else n=t;else n=t;return-1==e.indexOf("?")?(e+="?",e+=n):(e+="&",e+=n),e}(e.url,e.data,e.contentType)),t.open(e.type,r,e.async),e.contentType&&t.setRequestHeader("Content-Type",e.contentType),"function"==x(e.beforeSend)){let r={};j(!0,r,e),e.beforeSend.call(this,t,r)}if(e.cache||t.setRequestHeader("Cache-Control","no-cache"),e.type&&"POST"===e.type.toUpperCase()){let r=e.processData?function(e,t="text"){let r;if(0==(t=t.trim().toLowerCase()).indexOf("application/x-www-form-urlencoded"))if("object"===x(e))for(let t in e){let n=e[t];if("array"===x(n))for(let e=0;e<n.length;e++){let i=t+"="+encodeURIComponent(n[e]);r.length>0&&(r+="&"),r+=i}else{let e=t+"="+encodeURIComponent(n);r.length>0&&(r+="&"),r+=e}}else r=e;else r=0==t.indexOf("text")?"object"===x(e)?JSON.stringify(e):e:0==t.indexOf("application/json")&&"object"===x(e)?JSON.stringify(e):e;return r}(e.data,e.contentType):e.data;t.send(r)}else t.send()}catch(r){e.error&&e.error(t,r.message),e.complete&&e.complete(t,r.message)}return t}var Oe=new class{constructor(){this.cache={}}get(e,t=-1){return new Promise((r,n)=>{if(this.cache[e]){let t=this.cache[e];r(t)}else Ae({url:e,type:"GET",cache:!1,data:{},timeout:t,async:!0,success:(t,n,i)=>{this.cache[e]=t,r(t)},error:(e,t)=>{n(t)}})})}};const ke=new V(["Loading","Loaded","Defining","Defined"]);class je{}class Ce{constructor(){this.register={}}get(e){return this.register[e]}put(e,t){this.register[e]=t}remove(e){let t=this.register[e];return delete this.register[e],t}contains(e){return!!this.register[e]}clear(){this.register={}}}class Ee{constructor(e,t){this.size=e,this.callback=t,this.status=!0,this.values=[],this.lastIndex=-1}work(e,t,r){if(this.status=e,!0===this.status&&(this.lastIndex!==t&&this.size--,this.lastIndex=t,this.values.push(r)),0===this.size||!1===this.status)try{Reflect.apply(this.callback,this,[this.status,this.values])}catch(e){_.error(e.message,e)}}isOK(){return this.status}}class Pe{constructor(e,t,r,n){this.index=e,this.src=t,this.params=r,this.progress=n}}var _e=new class{constructor(e={}){this.moduleManager=new Ce,this.head=N.head||N.getElementsByTagName("head")[0]||N.documentElement,this.isOldWebKit=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,this.options=e,this.options.paths||(this.options.paths={}),this.options.alias||(this.options.alias={})}ensure(...e){let t,r,n=[],i=e.length;t={},"object"===x(e[i-1])&&(j(!0,t,e[i-1]),i--),"function"==x(e[i-1])&&(r=e[i-1],i--);for(let t=0;t<i;t++)if("array"===x(e[t])){let r=e[t];for(let e=0;e<r.length;e++)void 0!==r[e]&&n.push(this.resolvePath(r[e]))}else{let r=e[t].split(",");for(let e=0;e<r.length;e++)void 0!==r[e]&&n.push(this.resolvePath(r[e]))}let s=new Ee(n.length,(e,t)=>{if(s.isOK())try{r&&Reflect.apply(r,{},t)}catch(e){_.error(e.message,e)}else try{_.error(e),r&&Reflect.apply(r,{},[])}catch(e){_.error(e.message,e)}}),o=new Te;for(let e=0;e<n.length;e++){let r=new Pe(e,n[e],t,s);this.mount(o,r)}return this}mount(e,t){if(this.isNaturePath(t.src,"js")){let r=t.params.jsPoint;return null==r&&(r=this.head),this.mountJS(e,t,r)}if(this.isNaturePath(t.src,"css")){let r=t.params.cssPoint;return null==r&&(r=this.head),this.mountCSS(e,t,r)}if(this.isNaturePath(t.src,"html")){let r=t.params.htmlPoint;return null==r&&(r=N.body),this.mountHTML(e,t,r)}let r=this.getFileNamePostfix(t.src);if("js"===r||0===r.length){let r=t.params.jsPoint;return null==r&&(r=this.head),this.mountJS(e,t,r)}if("css"===r){let r=t.params.cssPoint;return null==r&&(r=this.head),this.mountCSS(e,t,r)}{let r=t.params.htmlPoint;return null==r&&(r=N.body),this.mountHTML(e,t,r)}}mountHTML(e,t,r){e.post(e=>{let n=t.params.timeout||this.options.timeout||3e4,i=t.src;Oe.get(i,n).then(n=>{r.innerHTML=n,t.progress.work(!0,t.index,n),e.resolve()},r=>{_.error(r),t.progress.work(!1),e.reject()})})}mountCSS(e,t,r){e.post(e=>{let n=t.src,i=N.createElement("link");this.options.charset&&(i.charset=this.options.charset),i.setAttribute("crossorigin",!0);let s="onload"in i;if(this.isOldWebKit||!s){let n={timeout:this.options.time||3e3,time:0,isOldWebKit:this.isOldWebKit,success:()=>{t.progress.work(!0,t.index,t.src),e.resolve()},error:()=>{try{r.removeChild(i)}catch(e){_.error(e.message,e)}t.progress.work(!1),e.resolve()}};setTimeout(()=>{!function e(t,r){let n,i=t.sheet;if(r.isOldWebKit)i&&(n=!0);else if(i)try{i.cssRules&&(n=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(n=!0)}setTimeout(()=>{r.time+=20,n?r.success():r.time>r.timeout?r.error():e(t,r)},20)}(i,n)},1)}else i.onload=()=>{i.onload=i.onerror=null,t.progress.work(!0,t.index,t.src),e.resolve()},i.onerror=()=>{try{r.removeChild(i)}catch(e){_.error(e.message,e)}i.onload=i.onerror=null,t.progress.work(!1),e.reject()};let o=N.getElementById(n);o&&o.parentNode.removeChild(o),i.defer=!0,i.rel="stylesheet",i.type="text/css",i.id=n,i.href=n,r.appendChild(i)})}mountJS(e,t,r){e.post(e=>{let n=t.src,i=this.moduleManager.get(n);if(i&&(i.status==ke.Defined||i.status==ke.Loaded))return t.progress.work(!0,t.index,i.exports),void e.resolve();i=new je,i.id=n,i.src=n,i.status=ke.Loading,this.moduleManager.put(n,i);let s=N.createElement("script");s.setAttribute("crossorigin","true"),this.options.charset&&(s.charset=this.options.charset),"onload"in s?(s.onload=()=>{s.onload=s.onerror=null,i.status==ke.Loading&&(i.status=ke.Loaded,t.progress.work(!0,t.index,n)),e.resolve()},s.onerror=()=>{try{r.removeChild(s)}catch(e){_.error(e.message,e)}s.onload=s.onerror=null,t.progress.work(!1),e.reject()}):s.onreadystatechange=()=>{/loaded|complete/.test(s.readyState)&&(s.onreadystatechange=null,i.status==ke.Loading&&(i.status=ke.Loaded,t.progress.work(!0,t.index,n)),e.resolve())},s.defer=!0,s.src=n,M.define=this.createDefine(i,t),r.appendChild(s)})}trimEmptyElement(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r].trim();0!==n.length&&t.push(n)}return t}createDefine(e,t){let r=this,n=function(...n){let i,s,o;e.status=ke.Defining;let l=n.length;1===l?(o=n[0],i=void 0):2===l?(o=n[1],S(n[0])?(s=r.trimEmptyElement(n[0]),i=void 0):s=void 0):(i=n[0],s=r.trimEmptyElement(n[1]),o=n[2]),i&&(e.id=i,r.options.alias[i]=e.src),s&&s.length>0?r.ensure(s,(...r)=>{"function"===x(o)?e.exports=Reflect.apply(o,e,r):e.exports=o,e.status=ke.Defined,t.progress.work(!0,t.index,e.exports)}):("function"===x(o)?e.exports=Reflect.apply(o,e,[]):e.exports=o,e.status=ke.Defined,t.progress.work(!0,t.index,e.exports))};return n.amd=!0,n}resolvePath(e){try{if(this.isNaturePath(e,"all"))return e;e=this.parserPath(e,!0);let t=this.getFileNamePostfix(e);return t=t.toLowerCase(),-1==e.indexOf("?")?("js"!=t&&"css"!=t&&"html"!=t&&(e+=".js"),e+="?version=",e+="2.0.0"):(e+="&version=",e+="2.0.0"),e}catch(t){throw _.error(`resolve path[${e}] fail`,t),t}}getFileNamePostfix(e){let t=e.lastIndexOf("?");-1==t&&(t=e.length);let r=e.lastIndexOf(".",t);return-1==r?"":e.substring(r+1,t)}isNaturePath(e,t){if(null==this.options.nature)return!1;if("all"===t||"js"===t){let t=this.options.nature.js;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}if("all"===t||"css"===t){let t=this.options.nature.css;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}if("all"===t||"html"===t){let t=this.options.nature.html;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}return!1}parserPath(e,t){if(0==e.indexOf("http://"))return e;if(0==e.indexOf("https://"))return e;if(0==e.indexOf("file:///"))return e;if(0==e.indexOf("/")){return I+e.slice(1)}if(0==e.indexOf("./")){return I+e.slice(2)}if(t){let t=this.options.alias[e];if(!t){let r=e.indexOf("/");if(-1==r)t=e;else{let n=e.slice(0,r),i=this.options.paths[n];t=i?i+e.slice(r):e}}return this.parserPath(t,!1)}return I+e}};class Le{}class Me{constructor(){this.forbidTime=3e4,this.submitRecorder=new Le}isSameRoute(e,t){return null!=e&&null!=t&&(e.name===t.name&&e.path===t.path&&e.root===t.root)}acquire(e){let t=(new Date).getTime();if(!(this.submitRecorder&&this.isSameRoute(e,this.submitRecorder.route)&&this.submitRecorder.time&&t-this.submitRecorder.time<=this.forbidTime))return this.submitRecorder.route=e,this.submitRecorder.time=t,t;this.submitRecorder.time=t}release(e){this.submitRecorder&&this.submitRecorder.time===e&&(this.submitRecorder.route=void 0)}}class Ne{constructor(e,t){this.data={},this.to=e,this.from=t}}class qe{constructor(){this.defaultOperationType=te.Push}}const Xe=Symbol("_constructRouteModel"),Ie=Symbol("_findRouteModel"),Fe=Symbol("_findViewIndex"),De=Symbol("_removeView"),Ue=Symbol("_buildPage"),He=Symbol("_updateAll"),Be=Symbol("_updatePart"),Ve=Symbol("$ignoreHistoryChangeOnce"),Ke=Symbol("_handleHistoryChange"),ze=Symbol("_notifyChange"),Je=Symbol("currentRoutes"),We=Symbol("_addRouteRecorder"),Ge=Symbol("_removeRouteRecorder"),Ye=Symbol("_cloneRouteRecorder"),Qe=(Symbol("_recordInfo"),Symbol("_recordError")),Ze=Symbol("$register"),et=Symbol("$notFound"),tt=Symbol("$forest"),rt=Symbol("$history"),nt=Symbol("$apps"),it=Symbol("$rootApp"),st=Symbol("$beforeFilters"),ot=Symbol("$afterFilters"),lt=Symbol("$destroyFilters"),at=Symbol("$mainDispatcher"),ht=Symbol("_createNextFn"),ft=Symbol("_start"),ut=Symbol("_before"),ct=Symbol("_after"),pt=Symbol("_destroy"),dt=Symbol("_load"),mt=Symbol("_unload"),yt=Symbol("_loadDependency"),vt=Symbol("$resolvedModules"),gt=Symbol("$resolveDependency"),wt=Symbol("$routerGuard"),bt=Symbol.for("loadViewModel");var xt={name:"RouterLink",props:{tag:{type:[String],default:"a"},to:{type:[String,Object],required:!0},activeClass:String,exact:Boolean,exactActiveClass:String,event:{type:[String,Array],default:"click"}},render(e){const t=this.$router,r=this.$route,n={},i=t.options.linkActiveClass,s=t.options.linkExactActiveClass,o=null==i?"fox-router-link-active":i,l=null==s?"fox-router-link-exact-active":s,a=null==this.activeClass?o:this.activeClass,h=null==this.exactActiveClass?l:this.exactActiveClass;n[h]=function(e,t){if(void 0===e)return!1;return"object"===x(t)?t.path?e.path===t.path:e.name===t.name:"/"===t.charAt(0)?e.path===t:e.name===t}(r,this.to),n[a]=this.exact?n[h]:function(e,t){if(void 0===e)return!1;return"object"===x(t)?t.path?0===e.path.indexOf(t.path):e.name===t.name:"/"===t.charAt(0)?0===e.path.indexOf(t):e.name===t}(r,this.to);let f=t[c](this.to);const u=e=>{Rt(e)&&t.to(f)},p={click:Rt};Array.isArray(this.event)?this.event.forEach(e=>{p[e]=u}):p[this.event]=u;const d={class:n};let m=`#${f.path}`;if("a"===this.tag)d.on=p,d.attrs={href:m};else{const e=function e(t){if(t){let r;for(let n=0;n<t.length;n++){if(r=t[n],"a"===r.tag)return r;if(r.children&&(r=e(r.children)))return r}}}(this.$slots.default);if(e){e.isStatic=!1;const t=e.data=extend({},e.data);t.on=t.on||{};for(const e in t.on){const r=t.on[e];e in p&&(t.on[e]=Array.isArray(r)?r:[r])}for(const e in p)e in t.on?t.on[e].push(p[e]):t.on[e]=u;(e.data.attrs=extend({},e.data.attrs)).href=m}else d.on=p}return e(this.tag,d,this.$slots.default)}};function Rt(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function St(e,t,r){return"function"==typeof e?Reflect.apply(e,{},[r,t]):e}function Tt(e){let t=e.enterClass;return t||(t=e.transaction,t?`${t}-enter`:void 0)}function $t(e){let t=e.enterActiveClass;return t||(t=e.transaction,t?`${t}-enter-active`:void 0)}function At(e){let t=e.enterToClass;return t||(t=e.transaction,t?`${t}-enter-to`:void 0)}function Ot(e){let t=e.leaveClass;return t||(t=e.transaction,t?`${t}-leave`:void 0)}function kt(e){let t=e.leaveActiveClass;return t||(t=e.transaction,t?`${t}-leave-active`:void 0)}function jt(e){let t=e.leaveToClass;return t||(t=e.transaction,t?`${t}-leave-to`:void 0)}function Ct(e){let t={},r=e.duration;return"object"==typeof r?t={enter:r.enter||-1,leave:r.leave||-1,show:r.show||-1,hide:r.hide||-1}:("string"==typeof r&&(r=0==r.length?-1:Number(r)),t={enter:r,leave:r,show:r,hide:r}),t}function Et(e){return e.elm}function Pt(e,t){e.classList.add(t)}function _t(e,t){e.classList.remove(t)}const Lt=L&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout;function Mt(e){Lt(()=>{Lt(e)})}function Nt(e,t,r,n,i,s){if(n){if(null!=r&&r>=0)return void setTimeout(()=>{Reflect.apply(n,e,[t]),s&&Reflect.apply(s,e,[])},r);let i="animationend",o=r=>{Reflect.apply(n,e,[t,r]),X(t,i,o),s&&Reflect.apply(s,e,[])};q(t,i,o);let l="transitionend",a=r=>{Reflect.apply(n,e,[t,r]),X(t,l,a),s&&Reflect.apply(s,e,[])};q(t,l,a)}if(i){let r="animationcancel",n=s=>{Reflect.apply(i,e,[t,s]),X(t,r,n)};q(t,r,n)}}function qt(e,t,r={},n={}){let i=Et(t);if(!i)return;let s=Tt(r);s&&Pt(i,s);let o=$t(r);if(o&&Pt(i,o),n["before-enter"]){let t=n["before-enter"];Reflect.apply(t,e,[i])}let l=At(r),a=n.enter;if(s||o||l||a){let t=Ct(r),h=n["after-enter"],f=()=>{l&&i.classList.remove(l),o&&i.classList.remove(o),h&&Reflect.apply(h,e,[i])};Nt(e,i,t.enter,f,n["enter-cancelled"]),Mt(()=>{if(_t(i,s),l&&Pt(i,l),n.enter){let t=()=>{};Reflect.apply(a,e,[i,t])}})}}function Xt(e,t,r={},n={}){let i=Et(e);if(!i)return;let s=Ot(r);s&&Pt(i,s);let o=kt(r);if(o&&Pt(i,o),n["before-leave"]){let t=n["before-leave"];Reflect.apply(t,e,[i])}let l=jt(r),a=n.leave;if(s||o||l||a){let h=Ct(r),f=n["after-leave"],u=()=>{l&&i.classList.remove(l),o&&i.classList.remove(o),f&&Reflect.apply(f,e,[i])};Nt(e,i,h.leave,u,n["leave-cancelled"],t),Mt(()=>{if(_t(i,s),l&&Pt(i,l),a){let t=()=>{};Reflect.apply(a,e,[i,t])}})}else t()}function It(e,t={},r={}){let n=Et(e);if(!n)return;let i=function(e){return e.showClass||Tt(e)}(t);i&&Pt(n,i);let s=function(e){return e.showActiveClass||$t(e)}(t);if(s&&Pt(n,s),r["before-show"]){let t=r["before-show"];Reflect.apply(t,e,[n])}let o=function(e){return e.showToClass||At(e)}(t),l=r.show;if(i||s||o||l){let a=Ct(t),h=r["after-show"],f=()=>{o&&n.classList.remove(o),s&&n.classList.remove(s),h&&Reflect.apply(h,e,[n])};Nt(e,n,a.show,f),Mt(()=>{_t(n,i),o&&Pt(n,o),r.show&&Reflect.apply(l,e,[n])})}}function Ft(e,t={},r={}){let n=Et(e);if(!n)return;let i=function(e){return e.hideClass||Ot(e)}(t);i&&Pt(n,i);let s=function(e){return e.hideActiveClass||kt(e)}(t);if(s&&Pt(n,s),r["before-hide"]){let t=r["before-hide"];Reflect.apply(t,e,[n])}let o=function(e){return e.hideToClass||jt(e)}(t),l=r.hide;if(i||s||o||l){let a=Ct(t),h=r["after-hide"],f=()=>{o&&n.classList.remove(o),s&&n.classList.remove(s),h&&Reflect.apply(h,e,[n])};Nt(e,n,a.hide,f),Mt(()=>{_t(n,i),o&&Pt(n,o),r.hide&&Reflect.apply(l,e,[n])})}}var Dt={functional:!0,props:{name:{type:String,default:"default"},multi:{type:Boolean,default:!1},tag:{type:[String],required:!1,default:"div"},viewTag:{type:[String,Function],required:!1,default:"div"},viewTagProps:{type:[Object,Function],required:!1,default:()=>({})},viewTagAttrs:{type:[Object,Function],required:!1,default:()=>({})},viewClass:{type:[String,Function],required:!1,default:"fox-view"},viewActiveClass:{type:[String,Function],required:!1,default:"fox-view-active"},transaction:{type:String,required:!1},enterClass:{type:String,required:!1},enterActiveClass:{type:String,required:!1},enterToClass:{type:String,required:!1},leaveClass:{type:String,required:!1},leaveActiveClass:{type:String,required:!1},leaveToClass:{type:String,required:!1},showClass:{type:String,required:!1},showActiveClass:{type:String,required:!1},showToClass:{type:String,required:!1},hideClass:{type:String,required:!1},hideActiveClass:{type:String,required:!1},hideToClass:{type:String,required:!1},duration:{type:[Number,Object],required:!1}},render(e,t){let r=t.parent;const n=r.$createElement,i=r.$router,s=r.$route,o=t.props,l=o.name,a=o.multi;let h=t.data;const f=r._routerViewCache||(r._routerViewCache={});let c,g;a?h[p]=!0:h[d]=!0,h[y]=l;let w=0,b=!1;for(;r&&r._routerRoot!==r;){const e=r.$vnode?r.$vnode.data:{};e[d]&&(g||(g=e[y]),c||(c=e[W]?e[y]:e[v]),w++),e.keepAlive&&r._directInactive&&r._inactive&&(b=!0),r=r.$parent}if(h[m]=w,!a&&b){const e=f[l],r=e&&e.component;return r?(e.props&&Ut(r,h,e.route,e.props),n(r,h,t.children)):n()}let x=i[u](l,w,c,g,a);if(a){if(!x)return Ht(f,l,[]),n();let e=!1,t=[],r=[],i=[];for(let s=0;s<x.length;s++){if(void 0===x[s].model)continue;const l=x[s].name,a=x[s].index;let u=f[l];if(u&&u.id===x[s].model.id){if(u.active!=x[s].active){let e=St(o.viewActiveClass,l,a);if(e&&e.length>0){let t=Et(u.component),r=t&&t.classList;r&&(x[s].active&&!r.contains(e)?r.add(e):!x[s].active&&r.contains(e)&&r.remove(e))}u.active=x[s].active,x[s].active?t.push(()=>{It(u.component,o,h.on)}):t.push(()=>{Ft(u.component,o,h.on)})}i.push(u.component)}else{let r=[];if(r.push(St(o.viewClass,l,a)),x[s].active){let e=St(o.viewActiveClass,l,a);e&&e.length>0&&r.push(e)}let u={class:r,key:l},c=n("fox-router-view",{props:{name:l}});const p=St(o.viewTag,l,a),d=St(o.viewTagProps,l,a);d&&(u.props=d);const m=St(o.viewTagAttrs,l,a);if(m&&(u.attrs=m),x[s].viewTagAttrs)for(let e in x[s].viewTagAttrs)u.attrs[e]=x[s].viewTagAttrs[e];let y=n(p,u,[c]);(R=x[s]).opsType!==te.Append&&R.opsType!==te.Open||!y.data||((y.data.hook||(y.data.hook={})).create=(e,r)=>{qt(e,r,o,h.on),t&&t.length>0&&(t.forEach(e=>{Reflect.apply(e,{},[])}),t=void 0)},y.data.hook.activate=(e,r)=>{qt(e,r,o,h.on),t&&t.length>0&&(t.forEach(e=>{Reflect.apply(e,{},[])}),t=void 0)},y.data.hook.remove=(e,r)=>{t&&t.length>0&&(t.forEach(e=>{Reflect.apply(e,{},[])}),t=void 0),Xt(e,r,o,h.on)},e=!0),f[l]={component:y,active:x[s].active,id:x[s].model.id},i.push(y)}r.push(l)}if(Ht(f,l,r),e||t&&t.length>0&&(t.forEach(e=>{Reflect.apply(e,{},[])}),t=void 0),0==i.length)return n();return n(St(o.tag),h,i)}{if(!x||!x.model)return f[l]=null,n();let e=x.model.getComponent(c,l,w);f[l]={component:e},h.registerRouteInstance=(e,t)=>{t?x.model.setInstance(c,l,w,t):x.model.remove(c,l,w)},(h.hook||(h.hook={})).create=(e,t)=>{qt(e,t,o,h.on)},h.hook.activate=(e,t)=>{qt(e,t,o,h.on)},h.hook.remove=(e,t)=>{Xt(e,t,o,h.on)};const r=function(e,t,r){switch(typeof r){case"undefined":return;case"object":return r[e]?t.params:void 0;case"function":return r(t);case"boolean":return r?t.params:void 0;default:return}}(l,s,x.props);return r&&(j(!1,f[l],{route:s,props:r}),Ut(e,h,s,r)),h[W]=x.root,h[v]=c,n(e,h,t.children)}var R}};function Ut(e,t,r,n){if(n){let r=t.props=j(!0,{},n);t.attrs=t.attrs||{};for(const i in n)e.props&&i in e.props||(t.attrs[i]=r[i],delete r[i])}}function Ht(e,t,r){for(let n in e)r&&-1!==r.indexOf(n)||0===n.indexOf(t)&&delete e[n]}var Bt={props:{name:{type:String,default:()=>`fox-slot-root-${w.get()}`},to:{type:[String,Object],required:!0}},mounted(){const e=this.$router;if(!e)return;let t=e[c](this.to);t.root=this.name,e.to(t)},destroyed(){const e=this.$router;if(!e)return;let t=e[c](this.to);t.root=this.name,e.close(t)},render(e){let t={};!function(e,t,r,n=[]){for(let e in r)-1==n.indexOf(e)&&(t[e]=r[e])}(0,t,this.$attrs,["name","to"]),t.name=this.name;let r={};return function(e,t,r,n=[]){for(let e in r)-1==n.indexOf(e)&&(t[e]=r[e])}(0,r,this.$props,["name","to"]),e("fox-router-view",{attrs:t,props:r,on:this.$listeners})}};let Vt;function Kt(e){return 0===e.index?e.root:`${e.root}-${e.index}`}class zt{}zt.limitless="limitless",zt.once="one";const Jt=Symbol("$register");const Wt=Symbol("$id"),Gt=Symbol("$children");class Yt{constructor(e){this[Gt]={},this[Wt]=e}}const Qt=Symbol("$root");Symbol("$apps");class Zt{constructor(){this[Qt]=new Yt("_root_")}put(...e){let t=e.length;if(t<2)return _.error("参数至少包括一个(key,value)"),!1;let r=this[Qt];for(let n=0;n<t-1;n++){let t=e[n];if(!r[Gt][t]){let e=new Yt(t);r[Gt][t]=e,r===this[Qt]?Reflect.defineProperty(this,`${t}`,{get:function(){return e}}):Reflect.defineProperty(r,`${t}`,{get:function(){return e}}),Vt?Vt.util.defineReactive(e,"value",e.value):Reflect.defineProperty(e,"value",{get:function(){return e.value},set:function(t){return e.value=t}})}r=r[Gt][t]}return r.value=e[t-1],!0}get(...e){let t=e.length;if(0===t)return;let r=this[Qt];for(let n=0;n<t;n++){let t=e[n];if(!r[Gt][t])return;r=r[Gt][t]}return r.value}remove(...e){let t=e.length;if(0==t)return!1;let r=this[Qt];for(let n=0;n<t-1;n++){let t=e[n];if(!r[Gt][t])return!1;r=r[Gt][t]}let n=e[t-1];return!!r[Gt][n]&&(delete r[Gt][n],r===this[Qt]?Reflect.deleteProperty(this,`${n}`):Reflect.deleteProperty(r,`${n}`),!0)}contains(...e){let t=e.length;if(0==t)return!1;let r=this[Qt];for(let n=0;n<t-1;n++){let t=e[n];if(!r[Gt][t])return!1;r=r[Gt][t]}let n=e[t-1];return r[Gt][n]}}var er=function(e){let t={},r=[function(t){return e.match(/(Windows)[\s\/]+/)&&(t.windows=!0,t.isTouch="ontouchstart"in window||-1!==e.indexOf("touch")||-1!==e.indexOf("mobile")),1==t.windows},function(t){let r=e.match(/(Android);?[\s\/]+([\d.]+)?/);return r&&(t.android=!0,t.version=r[2],t.isBadAndroid=!/Chrome\/\d/.test(window.navigator.appVersion),t.isTouch="ontouchstart"in window||-1!==e.indexOf("touch")||-1!==e.indexOf("mobile")),!0===t.android},function(t){let r=e.match(/(iPhone\sOS)\s([\d_]+)/);if(r)t.ios=t.iphone=!0,t.version=r[2].replace(/_/g,"."),t.isTouch="ontouchstart"in window||-1!==e.indexOf("touch")||-1!==e.indexOf("mobile");else{let r=e.match(/(iPad).*OS\s([\d_]+)/);r?(t.ios=t.ipad=!0,t.version=r[2].replace(/_/g,"."),t.isTouch="ontouchstart"in window||-1!==e.indexOf("touch")||-1!==e.indexOf("mobile")):(r=e.match(/(Mac\s)OS\sX\s([\d_]+)/),r&&(t.ios=t.ipad=!0,t.version=r[2].replace(/_/g,"."),t.isTouch="ontouchstart"in window||-1!==e.indexOf("touch")||-1!==e.indexOf("mobile")))}return!0===t.ios}];for(let e=0;e<r.length&&1!=r[e](t);e++);return t}(window.navigator.userAgent);const tr=new Zt,rr=new class{constructor(){this[Jt]={}}on(e,t,r=!1){let n=this[Jt][e];n||(n=[],this[Jt][e]=n);let i={policy:1==r?zt.once:zt.limitless,callback:t};return n.push(i),this}off(e,t){if(!t)return delete this[Jt][e],this;let r=this[Jt][e];if(!r)for(let e=0;e<r.length;e++){if(r[e].callback==t){r.slice(e,1);break}}}bind(e,t,r=!1){return this.on(e,t,r)}unbind(e,t){return this.off(e,t)}once(e,t){return this.on(e,t,!0)}all(...e){let t=e.length;if(t<1)return;let r=e[t-1];if(!R(r))return void _.error("callback can not benn empty");let n=t-1,i=new Array(n),s=[].splice.call(e,0,n);for(let e=0;e<s.length;e++)this.once(s[e],t=>{i[e]=t,n-=1,0==n&&Reflect.apply(r,this,i)});return this}trigger(e,...t){let r=this[Jt][e];if(r){for(let e=0;e<r.length;){let n=r[e];if(n.policy==zt.once?r.slice(e,1):e++,n.callback)try{Reflect.apply(n.callback,this,t)}catch(e){_.error(e.message,e)}}return this}}emit(e,...t){return Reflect.apply(this.trigger,this,[e,...t])}},nr=new class{get current(){return this[Je]}constructor(e){this[Ze]=new Array,this[nt]=new Array,this[Je]=new Array,this[st]=new Array,this[ot]=new Array,this[lt]=new Array,this[at]=new Te,this[vt]=new Map,this[wt]=new Me,this[Ve]=!1,this.options=e||new qe;let t=this.options.routes||[];this.addRoutes(t),this.options.notFound&&this.setNotFoundRoute(this.options.notFound)}[Qe](e,t){let r=e||"error";t&&t.error&&t.error(r),_.error(r)}init(e){this[nt].push(e),e.$once("hook:destroyed",()=>{const t=this[nt].indexOf(e);t>-1&&this[nt].splice(t,1),this[it]===e&&(this[it]=this[nt][0]||void 0)}),this[it]||(this[it]=e,this[rt]=new H(this,this.options.query,this.options.hashMonitor,this.options.defaultPath),this[rt].listen(e=>{this[Ke](e)}),this[rt].init())}[Ke](e){this[Ve]?this[Ve]=!1:this[at].post(t=>{try{if(!e){let e=[...this[Je]];return this[mt](e),M.location.reload(),void t.resolve()}if(e.length==this[Je].length){let r=0;for(;r<this[Je].length&&ie.isSame(e[r],this[Je][r]);r++);if(r===this[Je].length)return void t.resolve()}else if(e.length<this[Je].length){let r=0;for(;r<e.length&&ie.isSame(e[r],this[Je][r]);r++);if(r===e.length){if(this[Je][r].opsType===te.Append){let e=[];for(let t=r;t<this[Je].length;t++)e.push(this[Je][t]);return void this[mt](e).then(()=>{t.resolve()})}}}this.restore(e).then(()=>{t.resolve()},e=>{this[Qe](e),t.resolve()})}catch(e){this[Qe](e.message),t.resolve()}})}[ze](){let e=[...this[Je]];this[nt].forEach(t=>{t._routes=e})}[We](e,t=-1){t<0||t>=this[Je].length?this[Je].push(e):this[Je].splice(t,0,e)}[Ye](){let e=[];for(let t of this[Je]){let r=new ie;C(r,t,!0),e.push(r)}return e}[Ge](e,t=-1){if(!f(this[Je]))return;let r=-1;for(let n=0;n<this[Je].length;n++)if(-1!=t){if(this[Je][n].index===t&&this[Je][n].root===e){r=n;break}}else if(this[Je][n].root===e){r=n;break}if(-1!=r){let e=this[Je][r];this[Je].splice(r,1);let t=e.session||{};this[pt](e,t)}}beforeEach(e){this[st].push(e)}afterEach(e){this[ot].push(e)}destroyEach(e){this[lt].push(e)}setResolveDependency(e){this[gt]=e}addRoutes(e){for(let t of e)this.addRoute(t)}addRoute(e,t=-1){let r=this[Xe](e);if(-1==t)this[Ze]=[...this[Ze],...r];else for(let e=r.length-1;e>=0;e--)this[Ze].splice(t,0,r[e])}setNotFoundRoute(e){let t=this[Xe](e);this[et]=t[0]}getRoutes(){return[...this[Ze]]}[Xe](e){let t=e.path||"";t.length>0&&"/"!==t.charAt(0)&&(t=`/${t}`);let r=e.components||e.component&&{"":e.component};if(!f(r)){let r=new ae;return r.path=t,r.redirect=e.redirect,[r]}let n=[];for(let t in r){let i=r[t];0===t.length&&(t="default");let s=new le(t,i,e.props,e.meta);n.push(s)}let i=!1,s=[];if(e.children)for(let r of e.children){let e=this[Xe](r);for(let r of e){let e=new ae;e.name=r.name,r.path.length>0?e.path=`${t}${r.path}`:(i=!0,e.path=t);let o=new se;o.nodes=[...n],e.layers=[o,...r.layers],s.push(e)}}if(!i){let r=new se;r.nodes=n;let i=new ae;i.name=e.name,i.path=t,i.layers=[r],s.splice(0,0,i)}return s}[Ie](e){let t=e.route;try{for(let r of this[Ze]){if(t.path&&r.path){let n=r.match;null==n&&(n=r.match=s(r.path));let i=n(t.path);if(!i)continue;if(r.redirect){let n=new ie;C(n,t,!1),n.path=r.redirect,n.redirect=void 0;let i={route:n,find:void 0};return!!this[Ie](i)&&(e.route=i.route,e.find=i.find,!0)}return t.params=t.params||{},j(!0,t.params,i.params),e.find=r,!0}if(t.name===r.name){t.params=t.params||{};let n=i(r.path);return t.path=n(t.params),e.find=r,!0}}}catch(e){_.error(e.message,e),t.error&&t.error(e.message)}return!1}[c](e){let t;if(S(e))if(t=new ie,"object"===x(e[0]))t=ie.from(e[0]);else for(let r=0;r<e.length;r++)0===r?"/"==e[r].charAt(0)?t.path=e[r]:t.name=e[r]:1===r?t.params=e[r]:2===r?t.root=e[r]:3===r&&j(!1,t,e[r]);else if("object"===x(e))t=ie.from(e);else{if("string"!==x(e))return;t=new ie,"/"==e.charAt(0)?t.path=e:t.name=e}if(t){if(t.path){let e=t.path.indexOf("?");-1!==e&&e<t.path.length-1&&(t.query=t.path.substring(e+1),t.path=t.path.substring(0,e))}t.root=t.root||"default",t.opsType=t.opsType||this.options.defaultOperationType||te.Push}return t}push(...e){let t=this[c](e);return t?(t.opsType=t.opsType||te.Push,this.to(t)):(this[Qe]("resolve route fail"),this)}put(...e){let t=this[c](e);return t?(t.opsType=te.Put,this.to(t)):(this[Qe]("resolve route fail"),this)}replace(...e){let t=this[c](e);return t?(t.opsType=te.Replace,this.to(t)):(this[Qe]("resolve route fail"),this)}append(...e){let t=this[c](e);return t?(t.opsType=te.Append,this.to(t)):(this[Qe]("resolve route fail"),this)}remove(e){return this[at].post(t=>{try{if(0===this[Je].length)return void t.resolve();let r,n=-1,i=[];if(f(e)){if(e.root)r=e.root;else{r=this[Je][0].root}if(e.all)for(let e=this[Je].length-1;e>0;e--){let t=this[Je][e];t.opsType===te.Append&&t.root===r&&(i.splice(0,0,t),n=e-1)}else if(e.until)for(let t=this[Je].length-1;t>0;t--){let s=this[Je][t];if(s.opsType===te.Append&&s.root===r){if("/"===e.until.charAt(0)&&e.until===s.path){n=t;break}if(e.until===s.name){n=t;break}i.splice(0,0,s)}}}else{r=this[Je][0].root;for(let e=this[Je].length-1;e>0;e--){let t=this[Je][e];if(t.opsType===te.Append&&t.root===r){i.push(t),n=e-1;break}}}if(0===i.length)return void t.resolve("can not find route");for(let e=n;e>=0;e--){let t=this[Je][e];if(t.root===r){let e=this[Fe](this[tt],t);if(e){this[tt].layers[e.y].nodes[e.x].active=t.active=!0}break}}let s=this[Je].length;this[mt](i).then(()=>{let e=this[Je].length,r=s-e;this[Ve]=!0,this.back(r),t.resolve()})}catch(e){this[Qe](e.message),t.resolve()}}),this}open(...e){let t=this[c](e);if(!t)return this[Qe]("resolve route fail"),this;let r=this[wt].acquire(t);return f(r)?(t.opsType=te.Open,this[at].post(e=>{try{let n=this[ft](t);this[ut](n),this[gt]&&this[yt](n),n.post(e=>{let t=e.session.to,r=this[tt],i=!1;for(let e=0;e<this[Je].length;e++){let n=this[Je][e];if(n.root!==t.root)continue;let s=n.active;if(t.path&&t.path===n.path||t.name&&t.name===n.name?(n.active=!0,i=!0):n.active=!1,s!==n.active){let e=this[Fe](r,n);if(!e)continue;r.layers[e.y].nodes[e.x].active=n.active}}i||(t.active=!0,t.ops=te.Open,this[dt](n),this[ct](n)),e.resolve(i?"replace":"push")}).wait((n,i)=>{let s=n.session.to,o=new ie;C(o,s,!0);const l=new B(o,this[Ye]());if(i&&"replace"===i?this[rt].replace(l):this[rt].push(l),this[wt].release(r),this[ze](),"function"===x(t.success))try{Reflect.apply(t.success,{},[])}catch(e){_.error(e.message,e)}e.resolve()},(t,n)=>{this[wt].release(r),this[Qe](n),e.resolve()})}catch(t){this[Qe](t.message),e.resolve()}}),this):(this[Qe]("route forbid"),this)}close(...e){return this[at].post(t=>{try{let r=this[c](e);if(!r)return void t.reject("resolve route fail");let n=[];for(let e=0;e<this[Je].length;e++){let t=this[Je][e];if(t.root===r.root){if(r.path&&r.path===t.path){n.push(t);break}if(r.name&&r.name===t.name){n.push(t);break}}}if(0===n.length)return void t.resolve();this[mt](n).then(()=>{let e=new ie;C(e,r,!0);const n=new B(e,this[Ye]());this[rt].replace(n),this[ze](),t.resolve()})}catch(e){this[Qe](e.message),t.resolve()}}),this}to(...e){let t=this[c](e);if(!t)return this[Qe]("resolve route fail"),this;let r=this[wt].acquire(t);if(!f(r))return this[Qe]("route forbid"),this;this[at].post(e=>{try{let n=this[ft](t);this[ut](n),this[gt]&&this[yt](n),this[dt](n),this[ct](n),n.wait((n,i)=>{let s=n.session.to,o=new ie;C(o,s,!0);const l=new B(o,this[Ye]());if(s.opsType===te.Replace&&this[rt].replace(l),s.opsType!==te.Push&&s.opsType!==te.Append||this[rt].push(l),this[wt].release(r),this[ze](),"function"===x(t.success))try{Reflect.apply(t.success,{},[])}catch(e){_.error(e.message,e)}e.resolve()},(t,n)=>{this[wt].release(r),this[Qe](n),e.resolve()})}catch(t){this[wt].release(r),this[Qe](t.message),e.resolve()}})}back(e){this[rt].go(-e)}[ht](e){return(t,r)=>{if("boolean"===x(t))t?e.resolve():e.reject(r);else if(t){let r=this[c](t),n=e.session.to;r.success=n.success,r.error=n.error,e.session.to=r,e.resolve()}else e.resolve()}}[ft](e){let t=this[Je].length>0?this[Je][0]:void 0,r=new Ne(e,t);return new Te(r)}[ut](e){for(let t of this[st])e.post(e=>{let r=this[ht](e);Reflect.apply(t,{},[e.session.to,e.session.from,r,e.session])})}[ct](e){e.post(e=>{for(let t of this[ot])try{Reflect.apply(t,{},[e.session.to,e.session.from,e.session])}catch(e){_.error(e.message,e)}e.resolve()})}[pt](e,t){for(let r of this[lt])try{Reflect.apply(r,{},[e,t])}catch(e){_.error(e.message,e)}"function"===x(e.destroy)&&Reflect.apply(e.destroy,e,[])}[yt](e){let t=e[Re],r=Reflect.apply(this[gt],this,[t.to]);if(!f(r))return;S(r)||(r=[r]);let n=[];for(let e of r)!0!==this[vt][e]&&n.push(e);0!==n.length&&e.post(e=>{_e.ensure(n,(...t)=>{if(t){for(let e of t){if(!e)continue;let t;t=J(e)?e.default:e,S(t)&&this.addRoutes(t)}for(let e of n)this[vt][e]=!0;e.resolve()}else e.reject()})})}[dt](e){e.post(e=>{let t={route:e.session.to,find:void 0};if(!this[Ie](t)){if(!this[et])return void e.reject("not find route model");t.find=this[et]}this[Ue](t.route,t.find,e.session).then(t=>{e.resolve()},t=>{e.reject(t)})})}[mt](e){if(!f(e)||0==e.length)return Promise.resolve();let t=this[tt],r=[];for(let n of e){let e=this[Fe](t,n);e&&r.push(e)}if(0==r.length){let e="can not find view index";return this[Qe](e),Promise.reject(e)}return new Promise((e,n)=>{for(let e of r.reverse())this[De](t,e);e()}).then(()=>{this[ze]()})}[bt](e){let t=[],r=this[tt],n=this[Fe](r,e);if(!f(n))return t;let i=r.layers[n.y].nodes[n.x],s=i[G]?i[G].name:void 0,o=new se;o.nodes=[ue.from(i,s,n.y)],t.push(o);let l=[i],a=n.y+1;for(;a<r.layers.length;a++){let n=new se;n.nodes=[];let i=r.layers[a].nodes,s=[];for(let t=0;t<i.length;){let r=i[t];r[Y]&&-1!==l.indexOf(r[Y])?(s.push(r),n.nodes.push(ue.from(r,e.root,a))):t++}if(0==s.length)break;l=s,t.push(n)}return t}[Fe](e,t){let r,n=t.root,i=f(t.index)?t.index:0;for(let t=0;t<e.layers.length;t++){let s=e.layers[t];for(let e=s.nodes.length-1;e>=0;e--){let o=s.nodes[e];if(o[Q]===n&&o.index===i)return r={x:e,y:t},r}}}[De](e,t){let r=e.layers[t.y].nodes[t.x];r[W]&&this[Ge](r[Q],r.index);let n=[r];e.layers[t.y].nodes.splice(t.x,1);let i=t.y+1;for(;i<e.layers.length;i++){let t=e.layers[i].nodes,r=[];for(let e=0;e<t.length;){let i=t[e];i[Y]&&-1!==n.indexOf(i[Y])?(i[W]&&this[Ge](i[Q],i.index),r.push(i),t.splice(e,1)):e++}if(0==r.length)break;n=r}}restore(e){if(f(e)&&null!==e){let t=[];for(let r=0;r<e.length;r++){let n=e[r],i=new Promise((e,t)=>{let r=this[ft](n);this[ut](r),this[gt]&&this[yt](r),this[dt](r),this[ct](r),r.wait((t,r)=>{e()},(e,r)=>{t()})});t.push(i)}return t.length>0?Promise.all(t).then(()=>{this[ze]()}):Promise.resolve()}return this[tt]=void 0,this[Je]=[],this[ze](),Promise.resolve()}[Ue](e,t,r){return(e.updateType||re.Part)!==re.All&&this[tt]?this[Be](t,e,r):this[He](t,e,r)}[He](e,t,r){let n=t.root;if(e.layers[0].nodes.length<1)return Promise.reject("illegal route structure");let i=[];const s=new fe,o=e.layers[0].nodes[0];o.isResolved||i.push(o.resolve());const l=new he(n,o,!0,void 0,t.index||0,t.opsType,t.viewTagAttrs);l.active=!0;const a=new se;a.nodes=[l],s.layers=[a];for(let r=1;r<e.layers[0].nodes.length;r++){let n=e.layers[0].nodes[r];n.isResolved||i.push(n.resolve());let s=new he(n.name,n,!0,void 0,0,t.opsType,t.viewTagAttrs);a.nodes.push(s)}for(let r=1;r<e.layers.length;r++){let n=new se;n.nodes=[];for(let s of e.layers[r].nodes){s.isResolved||i.push(s.resolve());let e=new he(s.name,s,!1,l,0,t.opsType,t.viewTagAttrs);n.nodes.push(e)}s.layers.push(n)}this[tt]=s,t.index=l.index,t.slot=new ne(n,0,void 0),t.session={},C(t.session,r,!0);let h=0;for(;h<this[Je].length&&ie.isSame(t,this[Je][h]);h++);for(let e=this[Je].length-1;e>=h;e--){let t=this[Je][e],r=t.session||{};this[pt](t,r)}return this[Je]=[t],i.length>0?Promise.all(i):Promise.resolve()}[Be](e,t,r){let n,i,s,o=this[tt],l=t.root;for(let e=0;e<o.layers.length;e++){let t=o.layers[e];for(let r=t.nodes.length-1;r>=0;r--){if(t.nodes[r][Q]===l){n={x:r,y:e};break}}if(n)break}let a=[];if(n){s=n.y;let r=o.layers[n.y].nodes[n.x];if(1!==e.layers[0].nodes.length)return Promise.reject("illegal route structure");const h=e.layers[0].nodes[0];if(h.isResolved||a.push(h.resolve()),i=new he(l,h,!0,r[G],t.index||0,t.opsType,t.viewTagAttrs),t.opsType===te.Append||t.opsType===te.Open){i.index=f(t.index)?t.index:w.get(),r.model?(t.opsType===te.Append?(r.active=!1,i.active=!0):f(t.active)&&(i.active=t.active),o.layers[n.y].nodes.push(i)):(this[De](o,n),t.opsType===te.Append?i.active=!0:f(t.active)&&(i.active=t.active),o.layers[n.y].nodes.push(i));let s=1,l=n.y+1;for(;l<o.layers.length;l++){let r=o.layers[l].nodes;if(!(s<e.layers.length))break;for(let n of e.layers[s].nodes){n.isResolved||a.push(n.resolve());let e=new he(n.name,n,!1,i,0,t.opsType,t.viewTagAttrs);r.push(e)}s++}for(let r=s;r<e.layers.length;r++){let n=new se;n.nodes=[];for(let s of e.layers[r].nodes){s.isResolved||a.push(s.resolve());let e=new he(s.name,s,!1,i,0,t.opsType,t.viewTagAttrs);n.nodes.push(e)}o.layers.push(n)}}else{o.layers[n.y].nodes[n.x]=i,r[W]&&this[Ge](r[Q],r.index);let s=[r],l=1,h=n.y+1;for(;h<o.layers.length;h++){let r=o.layers[h].nodes;if(s.length>0){let e=[];for(let t=0;t<r.length;){let n=r[t];n[Y]&&-1!==s.indexOf(n[Y])?(n[W]&&this[Ge](n[Q],n.index),e.push(n),r.splice(t,1)):t++}s=e}if(l<e.layers.length)for(let n of e.layers[l].nodes){n.isResolved||a.push(n.resolve());let e=new he(n.name,n,!1,i,0,t.opsType,t.viewTagAttrs);r.push(e)}l++}for(let r=l;r<e.layers.length;r++){let n=new se;n.nodes=[];for(let s of e.layers[r].nodes){s.isResolved||a.push(s.resolve());let e=new he(s.name,s,!1,i,0,t.opsType,t.viewTagAttrs);n.nodes.push(e)}o.layers.push(n)}}}else{let r,n=t.slot;if(!n)return Promise.reject("can not find view");if(s=n.level,s>o.layers.length)return Promise.reject("can not insert view");if(n.rootName){let e=o.layers[s-1];for(let t of e.nodes){if(t[W]&&t.name===n.rootName){r=t;break}if(t[G]&&t[G].name===n.rootName){r=t[G];break}}}if(1!==e.layers[0].nodes.length)return Promise.reject("illegal route structure");const h=e.layers[0].nodes[0];if(h.isResolved||a.push(h.resolve()),i=new he(l,h,!0,r,t.index||0,t.opsType,t.viewTagAttrs),f(t.active)&&(i.active=t.active),s<o.layers.length)o.layers[s].nodes.push(i);else{const e=new se;e.nodes=[i],o.layers.push(e)}let u=1,c=s+1;for(;c<o.layers.length;c++){let r=o.layers[c].nodes;if(!(u<e.layers.length))break;for(let n of e.layers[u].nodes){n.isResolved||a.push(n.resolve());let e=new he(n.name,n,!1,i,0,t.opsType,t.viewTagAttrs);r.push(e)}u++}for(let r=u;r<e.layers.length;r++){let n=new se;n.nodes=[];for(let s of e.layers[r].nodes){h.isResolved||a.push(h.resolve());let e=new he(s.name,s,!1,i,0,t.opsType,t.viewTagAttrs);n.nodes.push(e)}o.layers.push(n)}}return t.index=i.index,t.slot=new ne(l,s,i[G]?i[G].name:void 0),t.session={},C(t.session,r,!0),this[We](t),a.length>0?Promise.all(a):Promise.resolve()}[u](e,t,r,n,i=!1){if(void 0===this[tt])return;if(t<0||t>this[tt].layers.length)return;if(t<this[tt].layers.length){let s=this[tt].layers[t],o=[];for(let l of s.nodes){let s,a=!1,h=i?l[Q]:l.name;if(a=r?h===e&&l[G].name===r:h===e,a){if(t>0&&n&&!l[Y]){let e,r=this[tt].layers[t-1];for(let t of r.nodes)if(n===t.name){e=t;break}l[Y]=e}if(s=l.model?{model:l.model,rootName:l[G]?l[G].name:void 0,root:l[W],name:l.name,index:l.index,active:l.active,opsType:l.opsType,viewTagAttrs:l.viewTagAttrs}:{model:void 0},!i)return s;o.push(s)}}if(o.length>0)return o}let s,o;if(t>0)for(let e of this[tt].layers[t-1].nodes)if(n===e.name){o=e,s=e[W]?e:e[G];break}let l=new he(e,void 0,!1,s,0);if(l[Y]=o,t==this[tt].layers.length){let e=new se;e.nodes=[l],this[tt].layers.push(e)}else this[tt].layers[t].nodes.push(l)}};let ir={get type(){return x},get isFunction(){return R},get isArray(){return S},get isArrayLike(){return T},get makeArray(){return $},get merge(){return A},get isWindow(){return O},get isPlainObject(){return k},get extend(){return j},get clone(){return C},get each(){return P},get isEqual(){return E},get eventproxy(){return rr},get bus(){return tr},get EventChain(){return Te},get os(){return er},get ajax(){return Ae},get router(){return nr},get require(){return _e}};ir.logger=_,ir.Bus=Zt,ir.install=function e(t){if(e.installed&&Vt===t)return;e.installed=!0,Vt=t;const r=(e,t)=>{let r=e.$options._parentVnode;f(r)&&f(r=r.data)&&f(r=r.registerRouteInstance)&&r(e,t)};t.mixin({beforeCreate(){f(this.$options.fox)?(this._routerRoot=this,this._fox=this.$options.fox,this._router=this._fox.router,this._router.init(this),t.util.defineReactive(this,"_routes",[...this._router.current])):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed(){r(this)}}),Object.defineProperty(t.prototype,"$fox",{get(){return this._routerRoot._fox}}),Object.defineProperty(t.prototype,"$router",{get(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get(){let e,t=this._routerRoot._routes;if(!f(t)||0===t.length)return;let r=this;for(;r&&r._routerRoot!==r&&(e=r.$vnode?r.$vnode.data:{},!e[d]&&!e[p]);)r=r.$parent;if(e)if(e[p]){let r=[];for(let n of t)n.root===e[y]&&r.push(n);if(r.length>0)return r}else{let r=e[W]?e[y]:e[v];if(!r)return t[0];for(let e of t){if(Kt(e)===r)return e}}}}),Object.defineProperty(t.prototype,"$bus",{get(){return this._routerRoot._fox.bus}}),t.prototype.$fox_on=function(e,t,r=!1){this.$fox.eventproxy.on(e,t,r)},t.prototype.$fox_off=function(e,t){this.$fox.eventproxy.off(e,t)},t.prototype.$fox_once=function(e,t){this.$fox.eventproxy.once(e,t)},t.prototype.$fox_all=function(...e){let t=this.$fox.eventproxy;Reflect.apply(t.all,t,e)},t.prototype.$fox_trigger=function(e,...t){let r=this.$fox.eventproxy;Reflect.apply(r.trigger,r,[e,...t])},t.prototype.$fox_emit=function(e,...t){let r=this.$fox.eventproxy;Reflect.apply(r.trigger,r,[e,...t])},t.component("fox-router-view",Dt),t.component("fox-router-link",xt),t.component("fox-router-slot",Bt)},L&&window.Vue&&window.Vue.use(ir);t.default=ir}])}));